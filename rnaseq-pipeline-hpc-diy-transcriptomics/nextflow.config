/*
 * Default params
 */
params.reads = "${projectDir}/data/reads/ENCSR000COQ1_1.fastq.gz"
params.transcriptome = "${projectDir}/data/aligned/genome_index.tar.gz"
params.outdir = "results"

/*
 * Defines resource allocation for different processes 
 */

process {
  // Default resources for lightweight tasks
  // FASTQC and MULTIQC c5.large, c6a.large, c6in.large (2 vCPU 4GB RAM) or c6in.large (4 vCPU 8GB RAM)
  cpus = 2
  memory = 2.GB
  time = '30m'

  // c5.xlarge (4 vCPU 8GB RAM) or c6in.large (4 vCPU 8GB RAM) or c6in.2xlarge (8 vCPU 16GB RAM)
  withName: 'TRIM_GALORE' {
    scratch = true
    cpus = 8
    memory = 12.GB
    time = '1h'
    queue = 'nf-queue-trimming'
  }

  // r5.xlarge (4 vCPU 32GB RAM) or r6in.xlarge (4 vCPU 32GB RAM) or m6in.2xlarge (8 vCPU 32GB RAM)
  withName: 'HISAT2_ALIGN' {
    scratch = true
    cpus = 8
    memory = 24.GB     
    time = '1h'
    queue = 'nf-queue-hisat'
  }
}

/*
 * Defines execution profiles for different environments
 */

profiles {
  'docker' {
    docker.enabled = true
  }

  'batch' {
    docker.enabled = true
    process.executor = 'awsbatch'
    process.queue = 'nf-queue-fastqc-multiqc'
    workDir = 's3://diy-transcriptomics-rna-seq-data/test_env'
    aws.region = 'eu-west-1'
    aws.batch.cliPath = '/home/ec2-user/miniconda/bin/aws'
  }
}

